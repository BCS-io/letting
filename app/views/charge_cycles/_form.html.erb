<%= form_for charge_cycle do |f| %>
  <%= render 'shared/errors', object: charge_cycle %>

  <fieldset id='charge_cycle' class='shell'>
    <div class="grid">
      <div class='grid-row col-4-8 vertical-spacer'>
        <h2>Charge Cycle</h2>
      </div>
      <div class='col-4-8 vertical-spacer'>
        <%= view_link(charge_cycle) %>
      </div>
    </div>

    <div class='grid' >
      <div class='grid-row col-2-8 vertical-spacer'>
        &nbsp;
      </div>
      <div class='col-1-8 faded'>
        <%= f.label :name %>
      </div>
      <div class='col-1-8'>
        <%= f.text_field :name %>
      </div>
      <div class='col-2-8 vertical-spacer grid-row'>
        &nbsp;
      </div>
      <div class='col-1-8 faded'>
        <%= f.label :order %>
      </div>
      <div class='col-1-8'>
        <%= f.text_field :order, class: 'r-align'%>
      </div>

      <%= f.hidden_field :cycle_type, cycle_type: 'term' %>

      <hr class = 'faded'>

      <div class='grid-row col-6-24'>
        &nbsp;
      </div>
      <div class='col-3-24 faded'>
        Due Ons
      </div>
      <div class='col-2-24 vertical-spacer r-align'>
        <div class='faded'> Day</div>
      </div>
      <div class='col-2-24 vertical-spacer r-align'>
        <div class='faded'> Month </div>
      </div>
      <div class='col-2-24 vertical-spacer r-align'>
        <div class='faded'> Year </div>
      </div>
      <div class='col-9-24 vertical-spacer'>
        &nbsp;
      </div>

      <%= f.fields_for :due_ons do |builder| %>
        <div class='grid-row col-9-24'>
          &nbsp;
        </div>
        <div class='col-2-24'>
          <%= builder.text_field :day, class: 'r-align width-1-1' %>
        </div>
        <div class='col-2-24'>
          <%= builder.text_field :month, class: 'r-align width-1-1' %>
        </div>
        <div class='col-2-24 vertical-spacer'>
          <%= builder.text_field :year, class: 'r-align width-1-1' %>
        </div>
        <div class='col-9-24'>
          &nbsp;
        </div>
      <% end %>

      <hr class = 'faded'>

      <div class='grid-row col-2-8'>
        &nbsp;
      </div>
      <div class='col-1-8 faded'>
        Associations
      </div>
      <div class='col-3-8 vertical-spacer'>
        <!-- http://railscasts.com/episodes/17-habtm-checkboxes-revised?view=asciicast -->
        <% ChargedIn.all.each do |charged_in| %>
          <%= check_box_tag "charge_cycle[charged_in_ids][]", charged_in.id, charge_cycle.charged_in_ids.include?(charged_in.id), id: dom_id(charged_in) %>
          <%= label_tag dom_id(charged_in), charged_in.name %><br/>
        <% end %>
      </div>
      <div class='col-2-8 vertical-spacer'>
        &nbsp;
      </div>

    </div>
    <hr>
    <div class='grid-row col-2-8 no-print'>
      &nbsp;
    </div>
    <div class='col-6-8 no-r-pad no-print'>
      <%= f.button submit: '', class: "primary submit-button", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Updating Charge Cycle..."} %> or <%= link_to 'Cancel', charge_cycles_path, class: 'warn' %>
   </div>
  </fieldset>
<% end %>
