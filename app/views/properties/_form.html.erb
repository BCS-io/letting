<%= form_for property do |f| %>
  <%= render 'shared/errors', object: property %>
  <fieldset id='property' class='shell'>
    <h3>Property Edit
      <span class= 'floatright'><%= link_to 'Accounts', property_path(property) %><span>
      <span class= 'floatright'><%= link_to 'List', properties_path %><span>
    </h3>
    <div class='field text require half'>
      <%= f.label :human_ref,'Property ID' %>
      <%= f.text_field :human_ref, autofocus: true %>
    </div>

    <div class='field text require half'>
       <%= f.label :client_id, 'Client ID' %>
       <%= f.text_field :client_id %>

      <%= f.label :client_ref, 'Client Ref' %>

      <%= text_field_tag nil, property.client_ref, :id => 'property_client_ref',
        data: { autocomplete_source: Client.order(:human_ref).map { |t| { :label => t.human_ref, :value => t.id } } } %>
    </div>

    <%= render 'occupier', f: f, entitieable: property %>
    <%= render 'shared/address', f: f, parent: 'property' %>

  </fieldset>

  <%= render 'billing_profile', f: f, billing_profile: property.billing_profile %>
  <%= f.fields_for :account do |a| %>
    <%= render 'charges', f: a, charges: property.account.charges %>
  <% end %>
  <div>
    <%= f.submit %><span class = 'simple' ><%= link_to 'Cancel', properties_path %></span>
  </div>
<% end %>
