<% @title='View Property' %>
<%= render 'properties/search', path: properties_path, search_action: 'show', search_label: 'View Search' %>
<div class='grid shell'>
  <div class='col-1-2 vertical-spacer'>
    <h2>Property</h2>
  </div>
  <div class='col-1-2 vertical-spacer'>
    <%= link_to 'Edit', edit_property_path(@property.id), class: 'link-button' %>
  </div>
  <div class='col-1-4 vertical-spacer grid-row'>
    Property Id
  </div>

  <div class='col-3-4 vertical-spacer'>
    <%= @property.human_ref %>
  </div>
  <div class='col-1-4 vertical-spacer'>
    Client Id
  </div>
  <div class='col-3-4 vertical-spacer'>
    <strong><%= @property.client_ref %></strong>
  </div>

  <div class='col-1-4 vertical-spacer'>
    Association
  </div>
  <div class='col-3-8 vertical-spacer'>
    Occupier
  </div>
  <div class='col-3-8 vertical-spacer'>
    Agent
  </div>

  <div class='col-1-4 vertical-spacer'>
   <%= heading @property.entities.first %>
  </div>
  <div class='col-3-8 vertical-spacer'>
    <strong><%= @property.entities.full_name %></strong>
  </div>
  <div class='col-3-8 vertical-spacer'>
    <% if @property.billing_profile.use_profile? %>
      <strong><%= @property.billing_profile.entities.full_name %></strong>
    <% else %>
      None
    <% end %>
  </div>
  <div class='col-1-4 vertical-spacer'>
    Address
  </div>
  <div class='col-3-8 vertical-spacer'>
    <% @property.address_lines.each do |line| %>
      <%= line %><br>
    <% end %>
  </div>
  <div class='col-3-8 vertical-spacer'>
    <% if @property.billing_profile.use_profile? %>
      <% @property.billing_profile.address.address_lines.each do |line| %>
        <%= line %><br>
      <% end %>
    <% else %>
      Billing to property address
    <% end %>
  </div>
  <%= render 'show_charges', object: @property.account.charges %>
</div>


<div class='js-toggle-selection'>
  <div class='js-togglable'>
    <br>
    <%= link_to 'Full Accounts', '#', class: 'js-toggle toggle-event' %>
    <br>
    <!-- render 'show_accounts', items: AccountDecorator.new(@property.account).abbrev_items -->

    <div class='grid shell'>
      <div class='col-1-8 vertical-spacer'>
        Date
      </div>
      <div class='col-1-4 vertical-spacer'>
        Type
      </div>
      <div class='col-1-4 vertical-spacer'>
        Description
      </div>
      <div class='col-1-8 vertical-spacer'>
        Due
      </div>
      <div class='col-1-8 vertical-spacer'>
        Payment
      </div>
      <div class='col-1-8 vertical-spacer'>
        Balance
      </div>
      <%= render partial: 'account_item', collection: AccountDecorator.new(@property.account).abbrev_items %>
    </div>
  </div>
  <div class='js-togglable revealable'>
    <%= link_to 'Partial Accounts', '#', class: 'js-toggle toggle-event' %>
     <!-- render 'show_accounts', items: AccountDecorator.new(@property.account).items  -->

     <div class='grid shell'>
      <div class='col-1-8 vertical-spacer'>
        Date
      </div>
      <div class='col-1-4 vertical-spacer'>
        Type
      </div>
      <div class='col-1-4 vertical-spacer'>
        Description
      </div>
      <div class='col-1-8 vertical-spacer'>
        Due
      </div>
      <div class='col-1-8 vertical-spacer'>
        Payment
      </div>
      <div class='col-1-8 vertical-spacer'>
        Balance
      </div>
      <%= render partial: 'account_item', collection: AccountDecorator.new(@property.account).items %>
    </div>
  </div>
</div>



<br>
<%= link_to 'Print This Page', '#', class: 'print-window  simple-button'%>
