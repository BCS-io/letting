<div class='js-group-toggle'>
  <div class='col-1-1 faded'><h3>Charges</h3></div>

  <div class='col-5-24  grid-row  bottom-spacer  grid-header'>Charge</div>
  <div class='col-7-24  bottom-spacer  grid-header'>Dates Due</div>
  <div class='col-4-24  bottom-spacer  grid-header'>Payment</div>
  <div class='col-3-24  bottom-spacer  grid-header r-align'>Amount</div>
  <div class='col-3-24  bottom-spacer  grid-header'>Dormant</div>
  <div class='col-2-24  bottom-spacer  grid-header  r-align'>Action</div>

  <%= builder.fields_for :charges do |f| %>
    <div class='js-dynamic-group js-enclosed-toggle <%= hide_extra_new_records record: f.object, index: f.index %>'  >

      <div class='col-5-24  grid-row  bottom-spacer  spec-charge-count'>
        <%= f.text_field :charge_type, data: { autocomplete_source: Charge.uniq.pluck(:charge_type).sort } %>
      </div>
      <div class='col-7-24  bottom-spacer'>
        <%= f.select :cycle_id, grouped_options_for_select(CycleDecorator.for_select), { prompt: 'Please select'}  %>
      </div>
      <div class='col-4-24  bottom-spacer'>
        <%= f.select :payment_type, payment_types, { prompt: 'Please select'}  %>
      </div>
      <div class='col-3-24  bottom-spacer  r-align'>
        <%= f.text_field :amount, class: 'r-align' %>
        <%= f.hidden_field :start_date %>
        <%= f.hidden_field :end_date %>
      </div>
      <div class='col-3-24  bottom-spacer'>
        <%= f.check_box :dormant, class: 'js-check-box-toggle' %>
      </div>
      <div class='col-2-24  bottom-spacer'>
        <%= f.hidden_field :_destroy %>
        <%= delete_charge record: f.object %>
      </div>
    </div> <!-- js-dynamic-group js-enclosed-toggle -->
  <% end %>
  <div class='col-3-24  grid-row  bottom-spacer'>
    <%= add_link css: 'js-reveal-link', title: 'Add Charge' %>
  </div> <!-- end-row -->
</div>   <!-- js-group-toggle -->